{"ast":null,"code":"var _jsxFileName = \"/home/moringa/Documents/prjct/KinKeep.app/frontend-web/src/pages/MessagesPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport InstagramLayout from '../components/InstagramLayout';\nimport { useAuth } from '../context/AuthContext';\nimport apiService from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MessageBubble = ({\n  message,\n  isOwn,\n  currentUser\n}) => {\n  var _message$sender, _message$sender2, _message$sender3;\n  const formatTime = timestamp => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    if (diffInHours < 24) {\n      return date.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex ${isOwn ? 'justify-end' : 'justify-start'} mb-1 group`,\n    children: [!isOwn && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: ((_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.profile_image) || `https://picsum.photos/seed/${(_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.id}/150/150`,\n      alt: (_message$sender3 = message.sender) === null || _message$sender3 === void 0 ? void 0 : _message$sender3.username,\n      className: \"w-6 h-6 rounded-full mr-2 mt-auto flex-shrink-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `max-w-xs lg:max-w-md px-3 py-2 rounded-2xl relative ${isOwn ? 'message-bubble' : 'message-bubble received'}`,\n      children: [message.message_type === 'text' && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm break-words\",\n        children: message.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this), message.message_type === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: message.media_url,\n          alt: \"Shared content\",\n          className: \"rounded-lg max-w-full h-auto cursor-pointer\",\n          onClick: () => window.open(message.media_url, '_blank')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this), message.content && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm mt-2 break-words\",\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this), message.message_type === 'video' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          src: message.media_url,\n          controls: true,\n          className: \"rounded-lg max-w-full h-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), message.content && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm mt-2 break-words\",\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), message.message_type === 'audio' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-4 h-4\",\n          fill: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          src: message.media_url,\n          controls: true,\n          className: \"max-w-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `text-xs mt-1 opacity-0 group-hover:opacity-100 transition-opacity ${isOwn ? 'text-white/70' : 'text-gray-500'}`,\n        children: formatTime(message.created_at)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n};\n_c = MessageBubble;\nconst ConversationItem = ({\n  conversation,\n  isActive,\n  onClick\n}) => {\n  const formatLastMessage = message => {\n    if (!message) return 'Start a conversation';\n    switch (message.message_type) {\n      case 'image':\n        return 'ðŸ“· Photo';\n      case 'video':\n        return 'ðŸŽ¥ Video';\n      case 'audio':\n        return 'ðŸŽµ Voice message';\n      default:\n        return message.content || 'Message';\n    }\n  };\n  const formatTime = timestamp => {\n    if (!timestamp) return '';\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    if (diffInHours < 1) return 'now';\n    if (diffInHours < 24) return `${Math.floor(diffInHours)}h`;\n    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d`;\n    return date.toLocaleDateString();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex items-center p-3 cursor-pointer conversation-item ${isActive ? 'active' : ''}`,\n    onClick: onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: conversation.avatar,\n        alt: conversation.name,\n        className: \"w-14 h-14 rounded-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), conversation.unread_count > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -top-1 -right-1 unread-badge text-xs rounded-full w-5 h-5 flex items-center justify-center\",\n        children: conversation.unread_count > 9 ? '9+' : conversation.unread_count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-3 flex-1 min-w-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-sm font-medium truncate ${conversation.unread_count > 0 ? 'text-gray-900' : 'text-gray-700'}`,\n          children: conversation.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-gray-500 ml-2\",\n          children: formatTime(conversation.updated_at)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `text-sm truncate mt-1 ${conversation.unread_count > 0 ? 'text-gray-900 font-medium' : 'text-gray-500'}`,\n        children: formatLastMessage(conversation.last_message)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n_c2 = ConversationItem;\nconst NewMessageModal = ({\n  isOpen,\n  onClose,\n  onStartConversation\n}) => {\n  _s();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const searchUsers = async query => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await apiService.get(`/search/users?q=${encodeURIComponent(query)}`);\n      setSearchResults(response.data.users || []);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const debounceTimer = setTimeout(() => {\n      searchUsers(searchQuery);\n    }, 300);\n    return () => clearTimeout(debounceTimer);\n  }, [searchQuery]);\n  const handleStartConversation = async userId => {\n    try {\n      const response = await apiService.post('/conversations', {\n        participant_ids: [userId]\n      });\n      onStartConversation(response.data.conversation_id);\n      onClose();\n    } catch (error) {\n      console.error('Error starting conversation:', error);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg w-full max-w-md mx-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center p-4 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold\",\n          children: \"New Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-6 h-6\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M6 18L18 6M6 6l12 12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search users...\",\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          className: \"w-full search-input px-3 py-2 focus:outline-none focus:ring-2 focus:ring-kinkeep-primary\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-64 overflow-y-auto\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-6 w-6 border-b-2 border-kinkeep-primary mx-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this) : searchResults.length > 0 ? searchResults.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center p-3 user-search-item cursor-pointer\",\n          onClick: () => handleStartConversation(user.id),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.profile_image,\n            alt: user.username,\n            className: \"w-10 h-10 rounded-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium text-sm\",\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 19\n            }, this), user.full_name && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 text-sm\",\n              children: user.full_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 17\n          }, this)]\n        }, user.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }, this)) : searchQuery && !loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center text-gray-500\",\n          children: \"No users found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n};\n_s(NewMessageModal, \"4xyQR2Q+/+DWnMzF1C5c2YWVQJw=\");\n_c3 = NewMessageModal;\nconst MessagesPage = () => {\n  _s2();\n  const {\n    user\n  } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [activeConversation, setActiveConversation] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sendingMessage, setSendingMessage] = useState(false);\n  const [showNewMessageModal, setShowNewMessageModal] = useState(false);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  useEffect(() => {\n    loadConversations();\n  }, []);\n  const loadConversations = async () => {\n    try {\n      const response = await apiService.get('/conversations');\n      setConversations(response.data.conversations || []);\n    } catch (error) {\n      console.error('Error loading conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadMessages = async conversationId => {\n    try {\n      const response = await apiService.get(`/conversations/${conversationId}/messages`);\n      setMessages(response.data.messages || []);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n    }\n  };\n  const handleConversationClick = conversation => {\n    setActiveConversation(conversation);\n    loadMessages(conversation.id);\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !activeConversation || sendingMessage) return;\n    setSendingMessage(true);\n    try {\n      const response = await apiService.post(`/conversations/${activeConversation.id}/messages`, {\n        content: newMessage,\n        message_type: 'text'\n      });\n      setMessages(prev => [...prev, response.data.message_data]);\n      setNewMessage('');\n\n      // Update conversation list\n      loadConversations();\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n  const handleFileUpload = async (file, type) => {\n    if (!activeConversation) return;\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('type', type);\n    formData.append('folder', 'messages');\n    try {\n      const uploadResponse = await apiService.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      const messageResponse = await apiService.post(`/conversations/${activeConversation.id}/messages`, {\n        media_url: uploadResponse.data.url,\n        message_type: type\n      });\n      setMessages(prev => [...prev, messageResponse.data.message_data]);\n      loadConversations();\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    }\n  };\n  const handleStartConversation = conversationId => {\n    loadConversations().then(() => {\n      const conversation = conversations.find(c => c.id === conversationId);\n      if (conversation) {\n        handleConversationClick(conversation);\n      }\n    });\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(InstagramLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-kinkeep-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(InstagramLayout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-screen flex bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full md:w-96 messages-sidebar flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 chat-header flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold\",\n              children: user === null || user === void 0 ? void 0 : user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-4 h-4 ml-2\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M19 9l-7 7-7-7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowNewMessageModal(true),\n            className: \"p-2 attachment-button rounded-full\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto\",\n          children: conversations.length > 0 ? conversations.map(conversation => /*#__PURE__*/_jsxDEV(ConversationItem, {\n            conversation: conversation,\n            isActive: (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.id) === conversation.id,\n            onClick: () => handleConversationClick(conversation)\n          }, conversation.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-8 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-16 h-16 mx-auto text-gray-300 mb-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 1,\n                d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900 mb-2\",\n              children: \"No messages yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 mb-4\",\n              children: \"Start a conversation with your family members\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowNewMessageModal(true),\n              className: \"bg-kinkeep-primary text-white px-4 py-2 rounded-lg hover:bg-kinkeep-secondary transition-colors\",\n              children: \"Send Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col\",\n        children: activeConversation ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 chat-header flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: activeConversation.avatar,\n              alt: activeConversation.name,\n              className: \"w-10 h-10 rounded-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold\",\n                children: activeConversation.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: activeConversation.is_group ? `${activeConversation.participants.length} members` : 'Active now'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-auto flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"p-2 attachment-button rounded-full\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 432,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"p-2 attachment-button rounded-full\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"p-2 attachment-button rounded-full\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 overflow-y-auto p-4 space-y-2\",\n            children: [messages.map(message => /*#__PURE__*/_jsxDEV(MessageBubble, {\n              message: message,\n              isOwn: message.sender_id === (user === null || user === void 0 ? void 0 : user.id),\n              currentUser: user\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 chat-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSendMessage,\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                className: \"p-2 attachment-button rounded-full\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 relative\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  placeholder: \"Message...\",\n                  className: \"w-full message-input px-4 py-2 focus:outline-none focus:ring-2 focus:ring-kinkeep-primary focus:border-transparent\",\n                  disabled: sendingMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: !newMessage.trim() || sendingMessage,\n                className: \"send-button font-semibold\",\n                children: sendingMessage ? 'Sending...' : 'Send'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileInputRef,\n              type: \"file\",\n              accept: \"image/*,video/*,audio/*\",\n              onChange: e => {\n                const file = e.target.files[0];\n                if (file) {\n                  const type = file.type.startsWith('image/') ? 'image' : file.type.startsWith('video/') ? 'video' : 'audio';\n                  handleFileUpload(file, type);\n                }\n              },\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-24 h-24 mx-auto text-gray-300 mb-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 1,\n                d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-medium text-gray-900 mb-2\",\n              children: \"Your Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 mb-4\",\n              children: \"Send private photos and messages to a friend or group.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowNewMessageModal(true),\n              className: \"kinkeep-btn-primary px-6 py-2\",\n              children: \"Send Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewMessageModal, {\n      isOpen: showNewMessageModal,\n      onClose: () => setShowNewMessageModal(false),\n      onStartConversation: handleStartConversation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 5\n  }, this);\n};\n_s2(MessagesPage, \"tJQyLgvSuzqBeaRk/ixdwlTMPQw=\", false, function () {\n  return [useAuth];\n});\n_c4 = MessagesPage;\nexport default MessagesPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MessageBubble\");\n$RefreshReg$(_c2, \"ConversationItem\");\n$RefreshReg$(_c3, \"NewMessageModal\");\n$RefreshReg$(_c4, \"MessagesPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","InstagramLayout","useAuth","apiService","jsxDEV","_jsxDEV","Fragment","_Fragment","MessageBubble","message","isOwn","currentUser","_message$sender","_message$sender2","_message$sender3","formatTime","timestamp","date","Date","now","diffInHours","toLocaleTimeString","hour","minute","toLocaleDateString","className","children","src","sender","profile_image","id","alt","username","fileName","_jsxFileName","lineNumber","columnNumber","message_type","content","media_url","onClick","window","open","controls","fill","viewBox","d","created_at","_c","ConversationItem","conversation","isActive","formatLastMessage","Math","floor","avatar","name","unread_count","updated_at","last_message","_c2","NewMessageModal","isOpen","onClose","onStartConversation","_s","searchQuery","setSearchQuery","searchResults","setSearchResults","loading","setLoading","searchUsers","query","trim","response","get","encodeURIComponent","data","users","error","console","debounceTimer","setTimeout","clearTimeout","handleStartConversation","userId","post","participant_ids","conversation_id","stroke","strokeLinecap","strokeLinejoin","strokeWidth","type","placeholder","value","onChange","e","target","autoFocus","length","map","user","full_name","_c3","MessagesPage","_s2","conversations","setConversations","messages","setMessages","activeConversation","setActiveConversation","newMessage","setNewMessage","sendingMessage","setSendingMessage","showNewMessageModal","setShowNewMessageModal","messagesEndRef","fileInputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadConversations","loadMessages","conversationId","handleConversationClick","handleSendMessage","preventDefault","prev","message_data","handleFileUpload","file","formData","FormData","append","uploadResponse","headers","messageResponse","url","then","find","c","is_group","participants","sender_id","ref","onSubmit","_fileInputRef$current","click","disabled","accept","files","startsWith","_c4","$RefreshReg$"],"sources":["/home/moringa/Documents/prjct/KinKeep.app/frontend-web/src/pages/MessagesPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport InstagramLayout from '../components/InstagramLayout';\nimport { useAuth } from '../context/AuthContext';\nimport apiService from '../services/api';\n\nconst MessageBubble = ({ message, isOwn, currentUser }) => {\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    \n    if (diffInHours < 24) {\n      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  return (\n    <div className={`flex ${isOwn ? 'justify-end' : 'justify-start'} mb-1 group`}>\n      {!isOwn && (\n        <img \n          src={message.sender?.profile_image || `https://picsum.photos/seed/${message.sender?.id}/150/150`}\n          alt={message.sender?.username}\n          className=\"w-6 h-6 rounded-full mr-2 mt-auto flex-shrink-0\"\n        />\n      )}\n      <div className={`max-w-xs lg:max-w-md px-3 py-2 rounded-2xl relative ${\n        isOwn \n          ? 'message-bubble' \n          : 'message-bubble received'\n      }`}>\n        {message.message_type === 'text' && (\n          <p className=\"text-sm break-words\">{message.content}</p>\n        )}\n        {message.message_type === 'image' && (\n          <div>\n            <img \n              src={message.media_url} \n              alt=\"Shared content\" \n              className=\"rounded-lg max-w-full h-auto cursor-pointer\"\n              onClick={() => window.open(message.media_url, '_blank')}\n            />\n            {message.content && <p className=\"text-sm mt-2 break-words\">{message.content}</p>}\n          </div>\n        )}\n        {message.message_type === 'video' && (\n          <div>\n            <video \n              src={message.media_url} \n              controls \n              className=\"rounded-lg max-w-full h-auto\"\n            />\n            {message.content && <p className=\"text-sm mt-2 break-words\">{message.content}</p>}\n          </div>\n        )}\n        {message.message_type === 'audio' && (\n          <div className=\"flex items-center space-x-2\">\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"/>\n            </svg>\n            <audio src={message.media_url} controls className=\"max-w-full\" />\n          </div>\n        )}\n        <div className={`text-xs mt-1 opacity-0 group-hover:opacity-100 transition-opacity ${\n          isOwn ? 'text-white/70' : 'text-gray-500'\n        }`}>\n          {formatTime(message.created_at)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ConversationItem = ({ conversation, isActive, onClick }) => {\n  const formatLastMessage = (message) => {\n    if (!message) return 'Start a conversation';\n    \n    switch (message.message_type) {\n      case 'image': return 'ðŸ“· Photo';\n      case 'video': return 'ðŸŽ¥ Video';\n      case 'audio': return 'ðŸŽµ Voice message';\n      default: return message.content || 'Message';\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    if (!timestamp) return '';\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    \n    if (diffInHours < 1) return 'now';\n    if (diffInHours < 24) return `${Math.floor(diffInHours)}h`;\n    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <div \n      className={`flex items-center p-3 cursor-pointer conversation-item ${\n        isActive ? 'active' : ''\n      }`}\n      onClick={onClick}\n    >\n      <div className=\"relative\">\n        <img \n          src={conversation.avatar}\n          alt={conversation.name}\n          className=\"w-14 h-14 rounded-full object-cover\"\n        />\n        {conversation.unread_count > 0 && (\n          <div className=\"absolute -top-1 -right-1 unread-badge text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n            {conversation.unread_count > 9 ? '9+' : conversation.unread_count}\n          </div>\n        )}\n      </div>\n      <div className=\"ml-3 flex-1 min-w-0\">\n        <div className=\"flex justify-between items-center\">\n          <h3 className={`text-sm font-medium truncate ${\n            conversation.unread_count > 0 ? 'text-gray-900' : 'text-gray-700'\n          }`}>\n            {conversation.name}\n          </h3>\n          <span className=\"text-xs text-gray-500 ml-2\">\n            {formatTime(conversation.updated_at)}\n          </span>\n        </div>\n        <p className={`text-sm truncate mt-1 ${\n          conversation.unread_count > 0 ? 'text-gray-900 font-medium' : 'text-gray-500'\n        }`}>\n          {formatLastMessage(conversation.last_message)}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nconst NewMessageModal = ({ isOpen, onClose, onStartConversation }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const searchUsers = async (query) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      const response = await apiService.get(`/search/users?q=${encodeURIComponent(query)}`);\n      setSearchResults(response.data.users || []);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const debounceTimer = setTimeout(() => {\n      searchUsers(searchQuery);\n    }, 300);\n\n    return () => clearTimeout(debounceTimer);\n  }, [searchQuery]);\n\n  const handleStartConversation = async (userId) => {\n    try {\n      const response = await apiService.post('/conversations', {\n        participant_ids: [userId]\n      });\n      onStartConversation(response.data.conversation_id);\n      onClose();\n    } catch (error) {\n      console.error('Error starting conversation:', error);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-md mx-4\">\n        <div className=\"flex justify-between items-center p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">New Message</h2>\n          <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        \n        <div className=\"p-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Search users...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full search-input px-3 py-2 focus:outline-none focus:ring-2 focus:ring-kinkeep-primary\"\n            autoFocus\n          />\n        </div>\n        \n        <div className=\"max-h-64 overflow-y-auto\">\n          {loading ? (\n            <div className=\"p-4 text-center\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-kinkeep-primary mx-auto\"></div>\n            </div>\n          ) : searchResults.length > 0 ? (\n            searchResults.map(user => (\n              <div \n                key={user.id}\n                className=\"flex items-center p-3 user-search-item cursor-pointer\"\n                onClick={() => handleStartConversation(user.id)}\n              >\n                <img \n                  src={user.profile_image}\n                  alt={user.username}\n                  className=\"w-10 h-10 rounded-full object-cover\"\n                />\n                <div className=\"ml-3\">\n                  <p className=\"font-medium text-sm\">{user.username}</p>\n                  {user.full_name && (\n                    <p className=\"text-gray-500 text-sm\">{user.full_name}</p>\n                  )}\n                </div>\n              </div>\n            ))\n          ) : searchQuery && !loading ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              No users found\n            </div>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst MessagesPage = () => {\n  const { user } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [activeConversation, setActiveConversation] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sendingMessage, setSendingMessage] = useState(false);\n  const [showNewMessageModal, setShowNewMessageModal] = useState(false);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    loadConversations();\n  }, []);\n\n  const loadConversations = async () => {\n    try {\n      const response = await apiService.get('/conversations');\n      setConversations(response.data.conversations || []);\n    } catch (error) {\n      console.error('Error loading conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadMessages = async (conversationId) => {\n    try {\n      const response = await apiService.get(`/conversations/${conversationId}/messages`);\n      setMessages(response.data.messages || []);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n    }\n  };\n\n  const handleConversationClick = (conversation) => {\n    setActiveConversation(conversation);\n    loadMessages(conversation.id);\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !activeConversation || sendingMessage) return;\n\n    setSendingMessage(true);\n    try {\n      const response = await apiService.post(`/conversations/${activeConversation.id}/messages`, {\n        content: newMessage,\n        message_type: 'text'\n      });\n      \n      setMessages(prev => [...prev, response.data.message_data]);\n      setNewMessage('');\n      \n      // Update conversation list\n      loadConversations();\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n\n  const handleFileUpload = async (file, type) => {\n    if (!activeConversation) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('type', type);\n    formData.append('folder', 'messages');\n\n    try {\n      const uploadResponse = await apiService.post('/upload', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      const messageResponse = await apiService.post(`/conversations/${activeConversation.id}/messages`, {\n        media_url: uploadResponse.data.url,\n        message_type: type\n      });\n      \n      setMessages(prev => [...prev, messageResponse.data.message_data]);\n      loadConversations();\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    }\n  };\n\n  const handleStartConversation = (conversationId) => {\n    loadConversations().then(() => {\n      const conversation = conversations.find(c => c.id === conversationId);\n      if (conversation) {\n        handleConversationClick(conversation);\n      }\n    });\n  };\n\n  if (loading) {\n    return (\n      <InstagramLayout>\n        <div className=\"h-screen flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-kinkeep-primary\"></div>\n        </div>\n      </InstagramLayout>\n    );\n  }\n\n  return (\n    <InstagramLayout>\n      <div className=\"h-screen flex bg-white\">\n        {/* Conversations List */}\n        <div className=\"w-full md:w-96 messages-sidebar flex flex-col\">\n          <div className=\"p-4 chat-header flex justify-between items-center\">\n            <div className=\"flex items-center\">\n              <h2 className=\"text-xl font-semibold\">{user?.username}</h2>\n              <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </div>\n            <button \n              onClick={() => setShowNewMessageModal(true)}\n              className=\"p-2 attachment-button rounded-full\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n            </button>\n          </div>\n          \n          <div className=\"flex-1 overflow-y-auto\">\n            {conversations.length > 0 ? (\n              conversations.map(conversation => (\n                <ConversationItem\n                  key={conversation.id}\n                  conversation={conversation}\n                  isActive={activeConversation?.id === conversation.id}\n                  onClick={() => handleConversationClick(conversation)}\n                />\n              ))\n            ) : (\n              <div className=\"p-8 text-center\">\n                <svg className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No messages yet</h3>\n                <p className=\"text-gray-600 mb-4\">Start a conversation with your family members</p>\n                <button \n                  onClick={() => setShowNewMessageModal(true)}\n                  className=\"bg-kinkeep-primary text-white px-4 py-2 rounded-lg hover:bg-kinkeep-secondary transition-colors\"\n                >\n                  Send Message\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Chat Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {activeConversation ? (\n            <>\n              {/* Chat Header */}\n              <div className=\"p-4 chat-header flex items-center\">\n                <img \n                  src={activeConversation.avatar}\n                  alt={activeConversation.name}\n                  className=\"w-10 h-10 rounded-full object-cover\"\n                />\n                <div className=\"ml-3\">\n                  <h3 className=\"font-semibold\">{activeConversation.name}</h3>\n                  <p className=\"text-sm text-gray-500\">\n                    {activeConversation.is_group ? \n                      `${activeConversation.participants.length} members` : \n                      'Active now'\n                    }\n                  </p>\n                </div>\n                <div className=\"ml-auto flex space-x-2\">\n                  <button className=\"p-2 attachment-button rounded-full\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                    </svg>\n                  </button>\n                  <button className=\"p-2 attachment-button rounded-full\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                    </svg>\n                  </button>\n                  <button className=\"p-2 attachment-button rounded-full\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\n                {messages.map(message => (\n                  <MessageBubble\n                    key={message.id}\n                    message={message}\n                    isOwn={message.sender_id === user?.id}\n                    currentUser={user}\n                  />\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Message Input */}\n              <div className=\"p-4 chat-header\">\n                <form onSubmit={handleSendMessage} className=\"flex items-center space-x-3\">\n                  <button \n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"p-2 attachment-button rounded-full\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                    </svg>\n                  </button>\n                  \n                  <div className=\"flex-1 relative\">\n                    <input\n                      type=\"text\"\n                      value={newMessage}\n                      onChange={(e) => setNewMessage(e.target.value)}\n                      placeholder=\"Message...\"\n                      className=\"w-full message-input px-4 py-2 focus:outline-none focus:ring-2 focus:ring-kinkeep-primary focus:border-transparent\"\n                      disabled={sendingMessage}\n                    />\n                  </div>\n                  \n                  <button\n                    type=\"submit\"\n                    disabled={!newMessage.trim() || sendingMessage}\n                    className=\"send-button font-semibold\"\n                  >\n                    {sendingMessage ? 'Sending...' : 'Send'}\n                  </button>\n                </form>\n                \n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*,video/*,audio/*\"\n                  onChange={(e) => {\n                    const file = e.target.files[0];\n                    if (file) {\n                      const type = file.type.startsWith('image/') ? 'image' : \n                                  file.type.startsWith('video/') ? 'video' : 'audio';\n                      handleFileUpload(file, type);\n                    }\n                  }}\n                  className=\"hidden\"\n                />\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <svg className=\"w-24 h-24 mx-auto text-gray-300 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n                <h3 className=\"text-xl font-medium text-gray-900 mb-2\">Your Messages</h3>\n                <p className=\"text-gray-600 mb-4\">Send private photos and messages to a friend or group.</p>\n                <button \n                  onClick={() => setShowNewMessageModal(true)}\n                  className=\"kinkeep-btn-primary px-6 py-2\"\n                >\n                  Send Message\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <NewMessageModal\n        isOpen={showNewMessageModal}\n        onClose={() => setShowNewMessageModal(false)}\n        onStartConversation={handleStartConversation}\n      />\n    </InstagramLayout>\n  );\n};\n\nexport default MessagesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}